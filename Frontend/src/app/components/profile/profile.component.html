<section class="min-h-screen flex items-center justify-center bg-gray-100">
  <div class="bg-white p-10 rounded-2xl shadow-xl w-full max-w-5xl flex flex-col md:flex-row gap-10">
    <div class="flex-1 bg-blue-50 p-8 rounded-2xl flex flex-col items-center justify-center shadow">
      <img
        [src]="user.userProfile?.profilePictureUrl || ('https://ui-avatars.com/api/?name=' + user.full_name + '&background=1976d2&color=fff&size=128')"
        alt="Avatar" class="w-32 h-32 rounded-full mb-4 border-4 border-blue-200 shadow" />
      <h2 class="text-2xl font-bold text-blue-700 mb-2 text-center">Your Profile</h2>
      <div class="text-lg text-gray-800 space-y-2 text-center">
        <p><strong>Name:</strong> {{ user.full_name }}</p>
        <p><strong>Phone:</strong> {{ user.phone_no }}</p>
        <p><strong>Affiliation:</strong> {{ user.affilation }}</p>
        <p *ngIf="user.userProfile?.bio"><strong>Bio:</strong> {{ user.userProfile.bio }}</p>
        <p *ngIf="user.userProfile?.linkedinUrl"><strong>LinkedIn:</strong> <a [href]="user.userProfile.linkedinUrl"
            class="text-blue-700 underline" target="_blank">{{ user.userProfile.linkedinUrl }}</a></p>
        <p *ngIf="user.userProfile?.twitterHandle"><strong>Twitter:</strong> <a
            [href]="'https://twitter.com/' + user.userProfile.twitterHandle" class="text-blue-700 underline"
            target="_blank">&#64;{{ user.userProfile.twitterHandle }}</a></p>
        <p *ngIf="user.userProfile?.website"><strong>Website:</strong> <a [href]="user.userProfile.website"
            class="text-blue-700 underline" target="_blank">{{ user.userProfile.website }}</a></p>
        <p *ngIf="user.userProfile?.dateOfBirth"><strong>Date of Birth:</strong> {{ user.userProfile.dateOfBirth }}</p>
        <p *ngIf="user.userProfile?.address"><strong>Address:</strong> {{ user.userProfile.address }}</p>
        <p *ngIf="user.userProfile?.city"><strong>City:</strong> {{ user.userProfile.city }}</p>
        <p *ngIf="user.userProfile?.country"><strong>Country:</strong> {{ user.userProfile.country }}</p>
        <p *ngIf="user.enrollmentId"><strong>Enrollment ID:</strong> {{ user.enrollmentId }}</p>
        <p *ngIf="user.course"><strong>Course:</strong> {{ user.course }}</p>
        <p *ngIf="user.conference"><strong>Conference:</strong> {{ user.conference.title }} ({{ user.conference.date }})
        </p>
        <div *ngIf="user.interests?.length">
          <strong>Interests:</strong>
          <ul class="list-disc list-inside text-left inline-block">
            <li *ngFor="let interest of user.interests">{{ interest.interestName }}</li>
          </ul>
        </div>
      </div>
    </div>

    <form [formGroup]="profileForm" (ngSubmit)="profileSubmit()"
      class="flex-1 flex flex-col gap-5 bg-blue-50 p-8 rounded-2xl shadow">
      <h1 class="text-3xl font-bold text-center mb-2">Update Profile</h1>

      <div class="flex flex-col gap-1">
        <input placeholder="Enter your name" type="text" formControlName="full_name"
          class="border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition duration-200" />
        <div class="text-red-500 text-sm"
          *ngIf="profileForm.get('full_name')?.invalid && profileForm.get('full_name')?.touched">
          Name must be at least 3 characters.
        </div>
      </div>

      <div class="flex flex-col gap-1">
        <input placeholder="Enter your phone" type="text" formControlName="phone_no"
          class="border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition duration-200" />
        <div class="text-red-500 text-sm"
          *ngIf="profileForm.get('phone_no')?.invalid && profileForm.get('phone_no')?.touched">
          Phone must be 10 digits.
        </div>
      </div>

      <div class="flex flex-col gap-1">
        <input placeholder="Enter your affiliation" type="text" formControlName="affilation"
          class="border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition duration-200" />
        <div class="text-red-500 text-sm"
          *ngIf="profileForm.get('affilation')?.invalid && profileForm.get('affilation')?.touched">
          Affiliation must be at least 3 characters.
        </div>
      </div>

      <div class="flex flex-col gap-1">
        <textarea placeholder="Bio" formControlName="bio" rows="2"
          class="border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition duration-200"></textarea>
      </div>

      <div class="flex flex-col gap-1">
        <input placeholder="LinkedIn URL" type="url" formControlName="linkedinUrl"
          class="border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition duration-200" />
      </div>

      <div class="flex flex-col gap-1">
        <input placeholder="Twitter Handle (without @)" type="text" formControlName="twitterHandle"
          class="border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition duration-200" />
      </div>

      <div class="flex flex-col gap-1">
        <input placeholder="Website" type="url" formControlName="website"
          class="border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition duration-200" />
      </div>

      <div class="flex flex-col gap-1">
        <input placeholder="Date of Birth" type="date" formControlName="dateOfBirth"
          class="border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition duration-200" />
      </div>

      <div class="flex flex-col gap-1">
        <input placeholder="Address" type="text" formControlName="address"
          class="border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition duration-200" />
      </div>

      <div class="flex flex-col gap-1">
        <input placeholder="City" type="text" formControlName="city"
          class="border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition duration-200" />
      </div>

      <div class="flex flex-col gap-1">
        <input placeholder="Country" type="text" formControlName="country"
          class="border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition duration-200" />
      </div>

      <div class="flex flex-col gap-1">
        <input placeholder="Profile Picture URL" type="url" formControlName="profilePictureUrl"
          class="border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition duration-200" />
      </div>

      <div class="flex flex-col gap-1">
        <input placeholder="Enrollment ID" type="text" formControlName="enrollmentId"
          class="border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition duration-200" />
      </div>
      <div class="flex flex-col gap-1">
        <input placeholder="Course" type="text" formControlName="course"
          class="border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition duration-200" />
      </div>
      <div class="flex flex-col gap-1">
        <label for="conferenceId" class="text-sm text-gray-600 font-medium mb-1">Conference</label>
        <select id="conferenceId" formControlName="conferenceId" class="border border-gray-300 rounded-lg p-2">
          <option value="">Select a conference</option>
          <option *ngFor="let conf of conferences" [value]="conf.id">{{ conf.title }} ({{ conf.date }})</option>
        </select>
      </div>
      <div class="flex flex-col gap-1">
        <label for="interests" class="text-sm text-gray-600 font-medium mb-1">Interests</label>
        <select id="interests" formControlName="interests" multiple class="border border-gray-300 rounded-lg p-2">
          <option *ngFor="let interest of interests" [value]="interest.interestId">{{ interest.interestName }}</option>
        </select>
      </div>
      <button type="submit"
        class="bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-all duration-200 font-semibold disabled:opacity-50 disabled:cursor-not-allowed text-md mt-2">
        Update Profile
      </button>
    </form>
  </div>
</section>